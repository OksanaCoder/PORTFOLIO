!function(h,p,u,e,t){var o=h(e),a="waypoint.reached",c=function(t,e){t.element.trigger(a,e),t.options.triggerOnce&&t.element[p]("destroy")},d=function(t,e){if(!e)return-1;for(var o=e.waypoints.length-1;0<=o&&e.waypoints[o].element[0]!==t[0];)o-=1;return o},y=[],w=function(t){h.extend(this,{element:h(t),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:h.proxy(function(){var o=this.element.scrollTop(),n=o>this.oldScroll,i=this,t=h.grep(this.waypoints,function(t,e){return n?t.offset>i.oldScroll&&t.offset<=o:t.offset<=i.oldScroll&&t.offset>o}),s=t.length;this.oldScroll&&o||h[u]("refresh"),this.oldScroll=o,s&&(n||t.reverse(),h.each(t,function(t,e){(e.options.continuous||t===s-1)&&c(e,[n?"down":"up"])}))},this)}),h(t).bind("scroll.waypoints",h.proxy(function(){this.didScroll||(this.didScroll=!0,e.setTimeout(h.proxy(function(){this.doScroll(),this.didScroll=!1},this),h[u].settings.scrollThrottle))},this)).bind("resize.waypoints",h.proxy(function(){this.didResize||(this.didResize=!0,e.setTimeout(h.proxy(function(){h[u]("refresh"),this.didResize=!1},this),h[u].settings.resizeThrottle))},this)),o.load(h.proxy(function(){this.doScroll()},this))},n={init:function(f,c){return this.each(function(){var t,o,n,e=h.fn[p].defaults.context,i=h(this);c&&c.context&&(e=c.context),h.isWindow(e)||(e=i.closest(e)[0]),o=e,n=null,h.each(y,function(t,e){if(e.element[0]===o)return n=e,!1}),(t=n)||(t=new w(e),y.push(t));var s=d(i,t),r=s<0?h.fn[p].defaults:t.waypoints[s].options,l=h.extend({},r,c);l.offset="bottom-in-view"===l.offset?function(){return(h.isWindow(e)?h[u]("viewportHeight"):h(e).height())-h(this).outerHeight()}:l.offset,s<0?t.waypoints.push({element:i,offset:null,options:l}):t.waypoints[s].options=l,f&&i.bind(a,f),c&&c.handler&&i.bind(a,c.handler)}),h[u]("refresh"),this},remove:function(){return this.each(function(t,e){var n=h(e);h.each(y,function(t,e){var o=d(n,e);0<=o&&(e.waypoints.splice(o,1),e.waypoints.length||(e.element.unbind("scroll.waypoints resize.waypoints"),y.splice(t,1)))})})},destroy:function(){return this.unbind(a)[p]("remove")}},i={refresh:function(){h.each(y,function(t,s){var e=h.isWindow(s.element[0]),r=e?0:s.element.offset().top,l=e?h[u]("viewportHeight"):s.element.height(),f=e?0:s.element.scrollTop();h.each(s.waypoints,function(t,e){if(e){var o=e.options.offset,n=e.offset;if("function"==typeof e.options.offset)o=e.options.offset.apply(e.element);else if("string"==typeof e.options.offset){var i=parseFloat(e.options.offset);o=e.options.offset.indexOf("%")?Math.ceil(l*(i/100)):i}e.offset=e.element.offset().top-r+f-o,e.options.onlyOnScroll||(null!==n&&s.oldScroll>n&&s.oldScroll<=e.offset?c(e,["up"]):null!==n&&s.oldScroll<n&&s.oldScroll>=e.offset?c(e,["down"]):!n&&s.element.scrollTop()>e.offset&&c(e,["down"]))}}),s.waypoints.sort(function(t,e){return t.offset-e.offset})})},viewportHeight:function(){return e.innerHeight?e.innerHeight:o.height()},aggregate:function(){var o=h();return h.each(y,function(t,e){h.each(e.waypoints,function(t,e){o=o.add(e.element)})}),o}};h.fn[p]=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&t?"object"==typeof t?n.init.apply(this,[null,t]):void h.error("Method "+t+" does not exist on jQuery "+p):n.init.apply(this,arguments)},h.fn[p].defaults={continuous:!0,offset:0,triggerOnce:!1,context:e},h[u]=function(t){return i[t]?i[t].apply(this):i.aggregate()},h[u].settings={resizeThrottle:200,scrollThrottle:100},o.load(function(){h[u]("refresh")})}(jQuery,"waypoint","waypoints",window);